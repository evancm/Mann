<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>House in the City – Esther Mann</title>
  <link rel="stylesheet" href="css/styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <div class="site">
    <header class="site-header">
      <div class="site-header-inner">
        <div class="site-title"><a href="index.html">ESTHER MANN</a></div>
        <nav class="nav">
          <a href="about.html">About</a>
          <a class="active" href="built-work.html">Built Work</a>
          <a href="pottery.html">Pottery</a>
          <a href="contact.html">Contact</a>
        </nav>
      </div>
      <div class="divider"></div>
    </header>

    <main class="page-inner">

      <!-- Hero image -->
      <section class="project-hero">
        <img src="images/redwoods.jpg" alt="House in the Redwoods">
      </section>

      <!-- Gray band -->
      <section class="project-band">
        <div class="project-band-inner">
          <div>
            <h1 class="project-title">House in the Redwoods</h1>
            <p class="project-subtitle">Mill Valley, CA</p>
          </div>
          <p class="project-description">
            A renovation and interior reconfiguration that prioritizes light, circulation,
            and a quieter material palette while respecting the original brick envelope.
          </p>
        </div>
      </section>

      <!-- Carousel -->
<section class="carousel" aria-label="Project photos carousel">
  <div
    class="carousel-track"
    id="carouselTrack"
    data-prefix="city"
    data-count="20"
    data-ext="jpg"
    data-alt="House in the City"
  ></div>

  <div class="carousel-controls">
    <button class="carousel-button prev" type="button" aria-label="Previous image" id="prevBtn">‹</button>
    <button class="carousel-button next" type="button" aria-label="Next image" id="nextBtn">›</button>
  </div>
</section>


    </main>

    <footer class="site-footer">
      <div class="site-footer-inner">
        <div class="footer-left">
          <span>@ESTHERMANN 2026</span>
          <span>
            Instagram:
            <a href="https://instagram.com/mannpottery" target="_blank" rel="noopener">@mannpottery</a>
          </span>
        </div>
        <nav class="footer-nav">
          <a href="index.html">Home</a>
          <a href="about.html">About</a>
          <a href="contact.html">Contact</a>
        </nav>
        <div class="footer-pot"></div>
      </div>
    </footer>
  </div>

<script>
  (function () {
    const track = document.getElementById('carouselTrack');
    const prev = document.getElementById('prevBtn');
    const next = document.getElementById('nextBtn');

    // Build slides from a naming pattern like city-01.jpg ... city-20.jpg
    const prefix = track.dataset.prefix;
    const count = parseInt(track.dataset.count, 10);
    const ext = track.dataset.ext || "jpg";
    const altBase = track.dataset.alt || "Project photo";

    function pad2(n) { return String(n).padStart(2, "0"); }

    for (let i = 1; i <= count; i++) {
      const filename = `images/${prefix}-${pad2(i)}.${ext}`;

      const slide = document.createElement('div');
      slide.className = 'carousel-slide';

      const img = document.createElement('img');
      img.src = filename;
      img.alt = `${altBase} ${i}`;
      img.loading = "lazy";

      slide.appendChild(img);
      track.appendChild(slide);
    }

    function getSlides() {
      return Array.from(track.querySelectorAll('.carousel-slide'));
    }

    // Find the slide whose center is closest to the viewport center
    function getCurrentIndex() {
      const slides = getSlides();
      if (!slides.length) return 0;

      const trackRect = track.getBoundingClientRect();
      const viewportCenter = trackRect.left + trackRect.width / 2;

      let bestIndex = 0;
      let bestDist = Infinity;

      slides.forEach((slide, idx) => {
        const r = slide.getBoundingClientRect();
        const center = r.left + r.width / 2;
        const dist = Math.abs(center - viewportCenter);
        if (dist < bestDist) {
          bestDist = dist;
          bestIndex = idx;
        }
      });

      return bestIndex;
    }

    function goToIndex(idx) {
      const slides = getSlides();
      if (!slides.length) return;

      const clamped = Math.max(0, Math.min(idx, slides.length - 1));
      slides[clamped].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
    }

    prev.addEventListener('click', () => goToIndex(getCurrentIndex() - 1));
    next.addEventListener('click', () => goToIndex(getCurrentIndex() + 1));
  })();
</script>


</body>
</html>
