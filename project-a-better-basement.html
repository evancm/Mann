<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>A Better Basement – Esther Mann</title>
  <link rel="stylesheet" href="css/styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <div class="site">
    <header class="site-header">
      <div class="site-header-inner">
        <div class="site-title"><a href="index.html">ESTHER MANN</a></div>
        <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <nav class="nav" id="mainNav">
          <a href="about.html">About</a>
          <a class="active" href="built-work.html">Built Work</a>
          <a href="pottery.html">Pottery</a>
          <a href="contact.html">Contact</a>
        </nav>
      </div>
      <div class="divider"></div>
    </header>

    <main class="project-page">

      <!-- Hero image -->
      <section class="project-hero-full">
        <img src="images/better-basement.jpg" alt="A Better Basement">
      </section>

      <!-- Info band -->
      <section class="project-info-band">
        <div class="project-info-header">
          <h1 class="project-info-title">A Better Basement</h1>
          <span class="project-info-location">Chicago, Illinois</span>
        </div>
        <div class="project-info-grid">
          <div class="project-info-meta">
            <p><strong>Size</strong> 1,200 square-feet</p>
            <p><strong>Renovation completed</strong> 2025</p>
            <p class="meta-spacer"></p>
            <p><strong>Architecture + Interiors,</strong> Esther Mann</p>
            <p><strong>General Contractor,</strong> Vladimir Havlic</p>
            <p class="meta-spacer"></p>
            <p><em>Photography by Jeffrey Johnson</em></p>
          </div>
          <div class="project-info-description">
            <h2>Renovation of a 100-year-old unfinished basement</h2>
            <p>An unfinished basement was reimagined to add both function and activity to the home of a Chicago couple and their two young children. While recognizing the need for practical areas like laundry and storage, the renovation also sought to create multiple zones dedicated to exercise and hobbies—which would become especially important during cold, Midwestern winters spent largely indoors.</p>
            <br>
            <p>Former storage space was converted into a home gym with a full bathroom. Another section of the basement, previously containing mechanical equipment and a maze of ductwork, was redesigned to accommodate personal interests: a soundproof music room for him and a pottery studio for her. To maximize available space, the traditional water heater was replaced with compact tankless heaters, and all mechanical equipment was consolidated into an enclosed mechanical room.</p>
            <p>Additionally, the remaining hallway area was transformed into an open art and play space for the children, ensuring that every member of the family has a purposeful and inviting space to enjoy.</p>
          </div>
        </div>
      </section>

      <!-- Photo Carousel -->
      <section class="carousel" aria-label="Project photos carousel">
        <div class="carousel-track" id="carouselTrack"></div>
        <div class="carousel-controls">
          <button class="carousel-button prev" type="button" aria-label="Previous image" id="prevBtn">&#8249;</button>
          <button class="carousel-button next" type="button" aria-label="Next image" id="nextBtn">&#8250;</button>
        </div>
      </section>

      <!-- Construction Carousel -->
      <section class="carousel" aria-label="Construction photos carousel">
        <div class="carousel-track" id="constructionCarouselTrack"></div>
        <div class="carousel-controls">
          <button class="carousel-button prev" type="button" aria-label="Previous image" id="constructionPrevBtn">&#8249;</button>
          <button class="carousel-button next" type="button" aria-label="Next image" id="constructionNextBtn">&#8250;</button>
        </div>
      </section>

    </main>

  <!-- Lightbox Modal -->
  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" aria-label="Close">&times;</button>
    <button class="lightbox-nav lightbox-nav--prev" id="lightboxPrev" aria-label="Previous image">&#8249;</button>
    <img class="lightbox-image" id="lightboxImage" src="" alt="">
    <button class="lightbox-nav lightbox-nav--next" id="lightboxNext" aria-label="Next image">&#8250;</button>
  </div>

    <footer class="site-footer">
      <div class="site-footer-inner">
        <div class="footer-left">
          <span>&copy; Esther Mann 2026</span>
          <a href="https://instagram.com/mannpottery" target="_blank" rel="noopener">@mannpottery</a>
        </div>
        <nav class="footer-nav">
          <a href="index.html">Home</a>
          <a href="about.html">About</a>
          <a href="contact.html">Contact</a>
        </nav>
        <div class="footer-pot"><img src="images/footer-symbol.jpg" alt="Esther Mann"></div>
      </div>
    </footer>
  </div>

<script>
  (function () {
    const track = document.getElementById('carouselTrack');
    const prev = document.getElementById('prevBtn');
    const next = document.getElementById('nextBtn');

    // Basement images (note: basement-03 doesn't exist)
    const carouselImages = [
      'images/basement-00.jpg',
      'images/basement-01.jpg',
      'images/basement-02.jpg',
      'images/basement-04.jpg',
      'images/basement-05.jpg',
      'images/basement-06.jpg'
    ];

    carouselImages.forEach((src, i) => {
      const slide = document.createElement('div');
      slide.className = 'carousel-slide';

      const img = document.createElement('img');
      img.src = src;
      img.alt = `A Better Basement ${i + 1}`;
      img.loading = 'lazy';

      slide.appendChild(img);
      track.appendChild(slide);
    });

    // Start at basement-01.jpg (index 1)
    window.addEventListener('load', () => {
      const slides = track.querySelectorAll('.carousel-slide');
      if (slides[1]) {
        track.scrollLeft = slides[1].offsetLeft - (track.offsetWidth / 2) + (slides[1].offsetWidth / 2);
      }
    });

    function getSlides() {
      return Array.from(track.querySelectorAll('.carousel-slide'));
    }

    function getCurrentIndex() {
      const slides = getSlides();
      if (!slides.length) return 0;

      const trackRect = track.getBoundingClientRect();
      const viewportCenter = trackRect.left + trackRect.width / 2;

      let bestIndex = 0;
      let bestDist = Infinity;

      slides.forEach((slide, idx) => {
        const r = slide.getBoundingClientRect();
        const center = r.left + r.width / 2;
        const dist = Math.abs(center - viewportCenter);
        if (dist < bestDist) {
          bestDist = dist;
          bestIndex = idx;
        }
      });

      return bestIndex;
    }

    function goToIndex(idx) {
      const slides = getSlides();
      if (!slides.length) return;

      const clamped = Math.max(0, Math.min(idx, slides.length - 1));
      slides[clamped].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
    }

    prev.addEventListener('click', () => goToIndex(getCurrentIndex() - 1));
    next.addEventListener('click', () => goToIndex(getCurrentIndex() + 1));

    // Construction Carousel
    const constructionTrack = document.getElementById('constructionCarouselTrack');
    const constructionPrev = document.getElementById('constructionPrevBtn');
    const constructionNext = document.getElementById('constructionNextBtn');

    // Construction images
    const constructionImages = [];
    for (let i = 1; i <= 64; i++) {
      constructionImages.push(`images/basement-construction-${String(i).padStart(2, '0')}.jpg`);
    }

    constructionImages.forEach((src, i) => {
      const slide = document.createElement('div');
      slide.className = 'carousel-slide';

      const img = document.createElement('img');
      img.src = src;
      img.alt = `Construction photo ${i + 1}`;
      img.loading = 'lazy';

      slide.appendChild(img);
      constructionTrack.appendChild(slide);
    });

    function getConstructionSlides() {
      return Array.from(constructionTrack.querySelectorAll('.carousel-slide'));
    }

    function getConstructionCurrentIndex() {
      const slides = getConstructionSlides();
      if (!slides.length) return 0;

      const trackRect = constructionTrack.getBoundingClientRect();
      const viewportCenter = trackRect.left + trackRect.width / 2;

      let bestIndex = 0;
      let bestDist = Infinity;

      slides.forEach((slide, idx) => {
        const r = slide.getBoundingClientRect();
        const center = r.left + r.width / 2;
        const dist = Math.abs(center - viewportCenter);
        if (dist < bestDist) {
          bestDist = dist;
          bestIndex = idx;
        }
      });

      return bestIndex;
    }

    function goToConstructionIndex(idx) {
      const slides = getConstructionSlides();
      if (!slides.length) return;

      const clamped = Math.max(0, Math.min(idx, slides.length - 1));
      slides[clamped].scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
    }

    constructionPrev.addEventListener('click', () => goToConstructionIndex(getConstructionCurrentIndex() - 1));
    constructionNext.addEventListener('click', () => goToConstructionIndex(getConstructionCurrentIndex() + 1));

    // Lightbox functionality
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightboxImage');
    const lightboxClose = document.querySelector('.lightbox-close');
    const lightboxPrev = document.getElementById('lightboxPrev');
    const lightboxNext = document.getElementById('lightboxNext');

    let currentLightboxIndex = 0;
    let currentLightboxImages = carouselImages;

    function showLightboxImage(index) {
      currentLightboxIndex = ((index % currentLightboxImages.length) + currentLightboxImages.length) % currentLightboxImages.length;
      lightboxImage.src = currentLightboxImages[currentLightboxIndex];
    }

    // Click on carousel slides to open lightbox
    track.addEventListener('click', (e) => {
      const slide = e.target.closest('.carousel-slide');
      if (!slide) return;

      const img = slide.querySelector('img');
      if (!img) return;

      currentLightboxImages = carouselImages;
      const filename = img.src.split('/').pop();
      currentLightboxIndex = carouselImages.findIndex(src => src.includes(filename));
      if (currentLightboxIndex === -1) currentLightboxIndex = 0;

      lightboxImage.src = carouselImages[currentLightboxIndex];
      lightboxImage.alt = img.alt;
      lightbox.classList.add('active');
      document.body.style.overflow = 'hidden';
    });

    // Click on construction carousel to open lightbox
    constructionTrack.addEventListener('click', (e) => {
      const slide = e.target.closest('.carousel-slide');
      if (!slide) return;

      const img = slide.querySelector('img');
      if (!img) return;

      const filename = img.src.split('/').pop();
      currentLightboxIndex = constructionImages.findIndex(src => src.includes(filename));
      if (currentLightboxIndex === -1) currentLightboxIndex = 0;

      currentLightboxImages = constructionImages;

      lightboxImage.src = constructionImages[currentLightboxIndex];
      lightboxImage.alt = img.alt;
      lightbox.classList.add('active');
      document.body.style.overflow = 'hidden';
    });

    // Lightbox navigation
    lightboxPrev.addEventListener('click', (e) => {
      e.stopPropagation();
      showLightboxImage(currentLightboxIndex - 1);
    });

    lightboxNext.addEventListener('click', (e) => {
      e.stopPropagation();
      showLightboxImage(currentLightboxIndex + 1);
    });

    // Close lightbox
    function closeLightbox() {
      lightbox.classList.remove('active');
      document.body.style.overflow = '';
    }

    lightboxClose.addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) closeLightbox();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeLightbox();
      if (lightbox.classList.contains('active')) {
        if (e.key === 'ArrowLeft') showLightboxImage(currentLightboxIndex - 1);
        if (e.key === 'ArrowRight') showLightboxImage(currentLightboxIndex + 1);
      }
    });
  })();

  // Mobile menu toggle
  document.getElementById('menuToggle').addEventListener('click', function() {
    this.classList.toggle('active');
    document.getElementById('mainNav').classList.toggle('active');
  });
</script>

</body>
</html>
